<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/default_layout}">

  <!-- ===================== HEAD ===================== -->
  <th:block layout:fragment="head">
    <title>자주하는 질문 | 창고이음 (SEMO)</title>
    <meta name="description" content="창고이음(세모) 자주하는 질문: 예약, 요금, 보관 가능/금지 물품, 픽업·배송, 환불·취소, 보안, 보험, 마일리지 등." />

    <!-- FAQPage 구조화 데이터 (SEO) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {
          "@type": "Question",
          "name": "예약은 어떻게 하나요?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "원하는 창고 상세 페이지에서 날짜와 물품 유형/부피를 선택한 뒤, 결제하면 예약이 확정됩니다."
          }
        },
        {
          "@type": "Question",
          "name": "보관이 금지된 물품이 있나요?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "위험물(가연성·폭발물), 불법 물품, 냄새·부패 우려 물품, 현금·유가증권 등 고가 귀중품은 보관이 불가합니다."
          }
        }
      ]
    }
    </script>
  </th:block>

  <!-- ===================== PAGE STYLES ===================== -->
  <th:block layout:fragment="extra-css">
    <style>
      :root {
        --brand: #e67e22;
        --ink: #2c3e50;
        --muted: #6b7280;
        --bg-soft: #f8fafc;
        --border: #e5e7eb;
      }
      body { font-family: 'Noto Sans KR', system-ui, -apple-system, Segoe UI, Roboto, 'Apple SD Gothic Neo', sans-serif; }
      .container { max-width: 960px; margin: 0 auto; padding: 32px 20px; }
      .page-title { font-size: clamp(24px, 2.8vw, 34px); font-weight: 800; color: var(--ink); margin-bottom: 8px; }
      .page-sub { color: var(--muted); margin-bottom: 24px; }

      .toolbar { display: grid; grid-template-columns: 1fr auto auto; gap: 12px; align-items: center; margin: 18px 0 26px; }
      .search { position: relative; }
      .search input { width: 100%; padding: 12px 40px 12px 14px; border: 1px solid var(--border); border-radius: 10px; outline: none; }
      .search .icon { position: absolute; right: 12px; top: 50%; transform: translateY(-50%); font-size: 18px; color: var(--muted); }

      .chipbar { display: flex; gap: 8px; flex-wrap: wrap; }
      .chip { border: 1px solid var(--border); background: white; padding: 8px 12px; border-radius: 999px; cursor: pointer; font-size: 14px; }
      .chip.active { background: var(--brand); color: white; border-color: var(--brand); }

      .faq { background: white; border: 1px solid var(--border); border-radius: 14px; overflow: hidden; }
      .faq + .faq { margin-top: 12px; }
      .faq__q { width: 100%; text-align: left; display: grid; grid-template-columns: 1fr auto; gap: 12px; align-items: center; padding: 16px; background: var(--bg-soft); border: none; cursor: pointer; }
      .faq__q:hover { background: #eef2ff; }
      .faq__q-title { font-weight: 700; color: var(--ink); }
      .faq__q-meta { display: flex; gap: 8px; align-items: center; color: var(--muted); font-size: 13px; }
      .faq__a { display: none; padding: 16px; line-height: 1.7; color: #111827; border-top: 1px solid var(--border); background: white; }
      .faq.open .faq__a { display: block; }

      .utils { display: flex; gap: 10px; justify-content: flex-end; margin: 18px 0; }
      .btn { padding: 8px 12px; border: 1px solid var(--border); background: white; border-radius: 10px; cursor: pointer; font-size: 14px; }
      .btn:hover { background: var(--bg-soft); }

      .empty { display: none; text-align: center; color: var(--muted); padding: 26px; border: 1px dashed var(--border); border-radius: 14px; background: #fff; }
      .empty.show { display: block; }

      .badge { font-size: 12px; padding: 2px 8px; border-radius: 999px; border: 1px solid var(--border); background: #fff; color: var(--muted); }

      @media (max-width: 640px) {
        .toolbar { grid-template-columns: 1fr; }
      }
    </style>
  </th:block>

  <!-- ===================== PAGE CONTENT ===================== -->
  <th:block layout:fragment="content">
    <main class="container" id="faq-root">
      <h1 class="page-title">자주하는 질문 (FAQ)</h1>
      <p class="page-sub">창고이음(SEMO) 이용 중 자주 묻는 질문을 모았어요. 원하는 내용을 검색하거나 카테고리로 골라보세요.</p>

      <!-- 툴바: 검색 + 카테고리칩 + 전체 토글 -->
      <div class="toolbar" role="region" aria-label="FAQ toolbar">
        <div class="search">
          <input type="search" id="faq-search" placeholder="질문·키워드를 입력하세요 (예: 예약, 온도, 환불)" aria-label="FAQ 검색" />
          <span class="icon">🔎</span>
        </div>
        <div class="chipbar" id="chipbar" aria-label="카테고리 선택">
          <button class="chip active" data-cat="all" type="button">전체</button>
          <button class="chip" data-cat="예약" type="button">예약</button>
          <button class="chip" data-cat="요금/결제" type="button">요금/결제</button>
          <button class="chip" data-cat="보관물품" type="button">보관물품</button>
          <button class="chip" data-cat="보안/안전" type="button">보안/안전</button>
          <button class="chip" data-cat="픽업·배송" type="button">픽업·배송</button>
          <button class="chip" data-cat="마일리지" type="button">마일리지</button>
          <button class="chip" data-cat="환불/취소" type="button">환불/취소</button>
          <button class="chip" data-cat="기타" type="button">기타</button>
        </div>
        <div class="utils">
          <button class="btn" id="btn-open">모두 펼치기</button>
          <button class="btn" id="btn-close">모두 접기</button>
        </div>
      </div>

      <!-- FAQ 리스트 -->
      <section id="faq-list" aria-live="polite">
        <!-- 항목 템플릿 (정적 샘플 + 필요 시 서버 데이터로 치환 가능) -->
        <!-- th:each 예시: th:each="f : ${faqs}" data-cat="[[${f.category}]]"  -->

        <article class="faq" data-cat="예약" id="q-reserve-how">
          <button class="faq__q" aria-expanded="false" aria-controls="a-reserve-how">
            <span class="faq__q-title">예약은 어떻게 하나요?</span>
            <span class="faq__q-meta"><span class="badge">예약</span><span class="copy" data-anchor="#q-reserve-how">링크복사</span></span>
          </button>
          <div class="faq__a" id="a-reserve-how" role="region" aria-labelledby="q-reserve-how">
            원하는 창고 상세 페이지에서 <b>기간·물품 유형·부피</b>를 선택하고 결제하면 예약이 확정됩니다. 결제 전까지는 장바구니에서 수정·삭제가 가능합니다.
          </div>
        </article>

        <article class="faq" data-cat="예약" id="q-reserve-change">
          <button class="faq__q" aria-expanded="false" aria-controls="a-reserve-change">
            <span class="faq__q-title">예약 변경/연장은 가능한가요?</span>
            <span class="faq__q-meta"><span class="badge">예약</span><span class="copy" data-anchor="#q-reserve-change">링크복사</span></span>
          </button>
          <div class="faq__a" id="a-reserve-change" role="region" aria-labelledby="q-reserve-change">
            보관 종료일 전이라면 <b>마이페이지 &gt; 예약 내역</b>에서 연장할 수 있습니다. 기간 변경 시 차액이 정산됩니다.
          </div>
        </article>

        <article class="faq" data-cat="요금/결제" id="q-price-calc">
          <button class="faq__q" aria-expanded="false" aria-controls="a-price-calc">
            <span class="faq__q-title">요금은 어떻게 계산되나요?</span>
            <span class="faq__q-meta"><span class="badge">요금/결제</span><span class="copy" data-anchor="#q-price-calc">링크복사</span></span>
          </button>
          <div class="faq__a" id="a-price-calc" role="region" aria-labelledby="q-price-calc">
            요금은 <b>보관 면적(또는 용량) × 기간</b>을 기준으로 하며, 창고별 기본단가와 시즌 요인이 반영됩니다. 결제 화면에서 상세 내역을 확인할 수 있습니다.
          </div>
        </article>

        <article class="faq" data-cat="보관물품" id="q-allowed-items">
          <button class="faq__q" aria-expanded="false" aria-controls="a-allowed-items">
            <span class="faq__q-title">어떤 물품을 보관할 수 있나요?</span>
            <span class="faq__q-meta"><span class="badge">보관물품</span><span class="copy" data-anchor="#q-allowed-items">링크복사</span></span>
          </button>
          <div class="faq__a" id="a-allowed-items" role="region" aria-labelledby="q-allowed-items">
            일반 생활용품, 재고상품, 계절용품 등 대부분 보관이 가능하며, 창고별 특화(상온/저온/상습도 관리) 옵션을 제공합니다. <b>냉장·냉동</b>이 필요한 경우 해당 태그가 있는 창고를 선택하세요.
          </div>
        </article>

        <article class="faq" data-cat="보관물품" id="q-prohibited-items">
          <button class="faq__q" aria-expanded="false" aria-controls="a-prohibited-items">
            <span class="faq__q-title">보관이 금지된 물품은 무엇인가요?</span>
            <span class="faq__q-meta"><span class="badge">보관물품</span><span class="copy" data-anchor="#q-prohibited-items">링크복사</span></span>
          </button>
          <div class="faq__a" id="a-prohibited-items" role="region" aria-labelledby="q-prohibited-items">
            위험물(가연성·폭발물), 불법 물품, 동물·생물, 악취·부패 우려 물품, 현금·귀금속·유가증권 등 <b>고가 귀중품</b>은 보관이 불가합니다. 자세한 목록은 이용약관을 참고하세요.
          </div>
        </article>

        <article class="faq" data-cat="보안/안전" id="q-security-iot">
          <button class="faq__q" aria-expanded="false" aria-controls="a-security-iot">
            <span class="faq__q-title">보안과 온·습도 관리는 어떻게 하나요?</span>
            <span class="faq__q-meta"><span class="badge">보안/안전</span><span class="copy" data-anchor="#q-security-iot">링크복사</span></span>
          </button>
          <div class="faq__a" id="a-security-iot" role="region" aria-labelledby="q-security-iot">
            창고별로 <b>CCTV, 출입통제, 화재감지</b>를 기본 제공하며, 일부 창고는 <b>IoT 센서</b>로 온·습도를 실시간 모니터링합니다. 사용자 앱에서 기록을 확인할 수 있습니다.
          </div>
        </article>

        <article class="faq" data-cat="보안/안전" id="q-insurance">
          <button class="faq__q" aria-expanded="false" aria-controls="a-insurance">
            <span class="faq__q-title">보험은 가입되어 있나요?</span>
            <span class="faq__q-meta"><span class="badge">보안/안전</span><span class="copy" data-anchor="#q-insurance">링크복사</span></span>
          </button>
          <div class="faq__a" id="a-insurance" role="region" aria-labelledby="q-insurance">
            제휴 창고는 화재·도난 등 기초 보장에 가입되어 있으며, 고가 물품 보관 시 <b>추가 보장 옵션</b>을 선택할 수 있습니다. 보장 범위와 한도는 창고별로 상이합니다.
          </div>
        </article>

        <article class="faq" data-cat="픽업·배송" id="q-pickup-delivery">
          <button class="faq__q" aria-expanded="false" aria-controls="a-pickup-delivery">
            <span class="faq__q-title">픽업·배송 서비스를 이용하려면?</span>
            <span class="faq__q-meta"><span class="badge">픽업·배송</span><span class="copy" data-anchor="#q-pickup-delivery">링크복사</span></span>
          </button>
          <div class="faq__a" id="a-pickup-delivery" role="region" aria-labelledby="q-pickup-delivery">
            예약 시 <b>픽업/배송 추가</b>를 선택하면 제휴 물류사가 방문 수거 또는 배송을 진행합니다. 지역·물량에 따라 추가 비용이 발생할 수 있습니다.
          </div>
        </article>

        <article class="faq" data-cat="마일리지" id="q-mileage">
          <button class="faq__q" aria-expanded="false" aria-controls="a-mileage">
            <span class="faq__q-title">마일리지는 어떻게 적립·사용하나요?</span>
            <span class="faq__q-meta"><span class="badge">마일리지</span><span class="copy" data-anchor="#q-mileage">링크복사</span></span>
          </button>
          <div class="faq__a" id="a-mileage" role="region" aria-labelledby="q-mileage">
            결제 금액의 일정 비율이 자동 적립되며, <b>배송·픽업 비용</b> 결제 시 차감 사용이 가능합니다. 프로모션에 따라 추가 적립이 제공될 수 있습니다.
          </div>
        </article>

        <article class="faq" data-cat="환불/취소" id="q-refund-cancel">
          <button class="faq__q" aria-expanded="false" aria-controls="a-refund-cancel">
            <span class="faq__q-title">예약 취소 및 환불 규정이 궁금해요.</span>
            <span class="faq__q-meta"><span class="badge">환불/취소</span><span class="copy" data-anchor="#q-refund-cancel">링크복사</span></span>
          </button>
          <div class="faq__a" id="a-refund-cancel" role="region" aria-labelledby="q-refund-cancel">
            이용 시작 <b>24시간 전</b>까지 취소 시 전액 환불, 이후에는 단계별 수수료가 적용됩니다. 창고별 특약이 있을 수 있으니 상세 정책을 확인해 주세요.
          </div>
        </article>

        <article class="faq" data-cat="요금/결제" id="q-tax">
          <button class="faq__q" aria-expanded="false" aria-controls="a-tax">
            <span class="faq__q-title">현금영수증/세금계산서 발행이 되나요?</span>
            <span class="faq__q-meta"><span class="badge">요금/결제</span><span class="copy" data-anchor="#q-tax">링크복사</span></span>
          </button>
          <div class="faq__a" id="a-tax" role="region" aria-labelledby="q-tax">
            개인은 <b>현금영수증</b>, 사업자는 <b>세금계산서</b> 발행이 가능합니다. 결제 완료 후 마이페이지에서 신청해 주세요.
          </div>
        </article>

        <article class="faq" data-cat="기타" id="q-contact">
          <button class="faq__q" aria-expanded="false" aria-controls="a-contact">
            <span class="faq__q-title">추가로 문의하고 싶어요.</span>
            <span class="faq__q-meta"><span class="badge">기타</span><span class="copy" data-anchor="#q-contact">링크복사</span></span>
          </button>
          <div class="faq__a" id="a-contact" role="region" aria-labelledby="q-contact">
            앱 내 <b>고객센터 &gt; 1:1 문의</b> 또는 이메일 <a href="mailto:support@semo.example" target="_blank" rel="noopener">support@semo.example</a> 로 연락 주세요.
          </div>
        </article>
      </section>

      <div class="empty" id="empty">검색 결과가 없습니다. 다른 키워드나 카테고리를 시도해 보세요.</div>
    </main>
  </th:block>

  <!-- ===================== PAGE SCRIPTS ===================== -->
  <th:block layout:fragment="extra-js">
    <script th:inline="javascript">
      (function() {
        const root = document.getElementById('faq-root');
        if (!root) return;

        const list = document.getElementById('faq-list');
        const items = Array.from(list.querySelectorAll('.faq'));
        const search = document.getElementById('faq-search');
        const chips = Array.from(document.querySelectorAll('.chipbar .chip'));
        const btnOpen = document.getElementById('btn-open');
        const btnClose = document.getElementById('btn-close');
        const empty = document.getElementById('empty');

        // Accordion toggle (accessibility-friendly)
        list.addEventListener('click', (e) => {
          const q = e.target.closest('.faq__q');
          const copyBtn = e.target.closest('.copy');

          // Deep-link copy
          if (copyBtn) {
            const anchor = copyBtn.getAttribute('data-anchor');
            const url = `${location.origin}${location.pathname}${anchor}`;
            navigator.clipboard.writeText(url).then(() => {
              copyBtn.textContent = '복사됨';
              setTimeout(() => (copyBtn.textContent = '링크복사'), 1200);
            });
            return;
          }

          if (!q) return;
          const article = q.closest('.faq');
          const expanded = q.getAttribute('aria-expanded') === 'true';
          q.setAttribute('aria-expanded', String(!expanded));
          article.classList.toggle('open');
        });

        // Open/Close all
        btnOpen.addEventListener('click', () => {
          items.forEach(it => { it.classList.add('open'); it.querySelector('.faq__q').setAttribute('aria-expanded', 'true'); });
        });
        btnClose.addEventListener('click', () => {
          items.forEach(it => { it.classList.remove('open'); it.querySelector('.faq__q').setAttribute('aria-expanded', 'false'); });
        });

        // Category filtering
        let activeCat = 'all';
        chips.forEach(chip => {
          chip.addEventListener('click', () => {
            chips.forEach(c => c.classList.remove('active'));
            chip.classList.add('active');
            activeCat = chip.getAttribute('data-cat');
            applyFilters();
          });
        });

        // Search filtering
        search.addEventListener('input', () => applyFilters());

        function applyFilters() {
          const q = search.value.trim().toLowerCase();
          let visibleCount = 0;

          items.forEach(it => {
            const cat = it.getAttribute('data-cat');
            const text = it.textContent.toLowerCase();
            const byCat = (activeCat === 'all' || activeCat === cat);
            const byText = (!q || text.includes(q));
            const show = byCat && byText;
            it.style.display = show ? '' : 'none';
            if (show) visibleCount++;
          });

          empty.classList.toggle('show', visibleCount === 0);
        }

        // Open item if URL has hash
        if (location.hash) {
          const target = document.querySelector(location.hash);
          if (target && target.classList.contains('faq')) {
            const qbtn = target.querySelector('.faq__q');
            qbtn?.setAttribute('aria-expanded', 'true');
            target.classList.add('open');
            target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        }
      })();
    </script>
  </th:block>
</html>